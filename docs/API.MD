## ğŸ“˜ API æ–‡ä»¶ï¼šå¤šç§Ÿæˆ¶ Agentic RAG ç­†è¨˜å¹³å°

> âœ… æ‰€æœ‰ API éƒ½éœ€å¸¶ä¸Š JWT Tokenï¼ˆé€é Firebase Authï¼‰ï¼Œå¾Œç«¯æœƒé©—è­‰ä½¿ç”¨è€…èº«ä»½ä¸¦æ“·å– `user_id` ä½œç‚ºç§Ÿæˆ¶ä¾æ“šã€‚

---

### ğŸ” Auth èªè­‰

| æ–¹æ³•     | è·¯å¾‘                   | æè¿°                                            |
| ------ | -------------------- | --------------------------------------------- |
| `POST` | `/auth/verify-token` | é©—è­‰å‰ç«¯å‚³ä¾†çš„ Firebase Tokenï¼Œå›å‚³ä½¿ç”¨è€…è³‡è¨Šèˆ‡ç§Ÿæˆ¶æ¨™è­˜ï¼ˆuser\_idï¼‰ |

---

### ğŸ“‚ ç­†è¨˜ä¸Šå‚³èˆ‡ç®¡ç†

| æ–¹æ³•       | è·¯å¾‘                           | æè¿°                                                            |
| -------- | ---------------------------- | ------------------------------------------------------------- |
| `GET`    | `/notes`                     | å–å¾—ç›®å‰ä½¿ç”¨è€…æ‰€æœ‰å·²ä¸Šå‚³çš„ç­†è¨˜æ¸…å–®ï¼ˆå« metadataï¼‰                                 |
| `GET`    | `/notes/{note_id}`           | æŸ¥çœ‹å–®ä¸€ç­†è¨˜å…§å®¹ï¼ˆå¯åŠ ä¸Š includeChunks=true å–å¾—åˆ†æ®µå…§å®¹ï¼‰                       |
| `DELETE` | `/notes/{note_id}`           | åˆªé™¤æŸç­†ç­†è¨˜èˆ‡å…¶å°æ‡‰çš„ chunks / å‘é‡è³‡æ–™                                     |
| `POST`   | `/notes/{note_id}/reprocess` | é‡æ–°è™•ç†æŒ‡å®šç­†è¨˜ï¼ˆé‡æ–° chunk / embeddingï¼‰                                |
| `PATCH`  | `/notes/{note_id}`           | ç·¨è¼¯ç­†è¨˜çš„æ¨™é¡Œæˆ– metadata                                             |

---

### ğŸ” æœå°‹èˆ‡èŠå¤©

| æ–¹æ³•       | è·¯å¾‘                  | æè¿°                                          |
| -------- | ------------------- | ------------------------------------------- |
| `POST`   | `/query`            | å‚³å…¥ä½¿ç”¨è€…æå•ï¼Œé€é RAG + Agentic pipeline é€²è¡Œæª¢ç´¢èˆ‡å›ç­”ç”Ÿæˆ |
| `GET`    | `/query/history`    | å–å¾—ä½¿ç”¨è€…æ­·å²å•ç­”ç´€éŒ„                                 |
| `GET`    | `/query/{query_id}` | æŸ¥çœ‹æŸä¸€å‰‡å•ç­”è©³ç´°å…§å®¹èˆ‡å¼•ç”¨ chunks                       |
| `DELETE` | `/query/{query_id}` | åˆªé™¤æ­·å²ç´€éŒ„                                      |

---

### ğŸ§  Agentic è¨­å®šèˆ‡èª¿æ•´

| æ–¹æ³•      | è·¯å¾‘                  | æè¿°                                                      |
| ------- | ------------------- | ------------------------------------------------------- |
| `GET`   | `/agents/config`    | å–å¾—ç›®å‰ agent pipeline çš„è¨­å®šï¼ˆå¦‚æ˜¯å¦å•Ÿç”¨åæ€ã€æœ€å¤§æ­¥æ•¸ç­‰ï¼‰                  |
| `PATCH` | `/agents/config`    | æ›´æ–° agent pipeline è¨­å®šï¼ˆä¾‹å¦‚è®Šæ›´ä½¿ç”¨çš„ LLMã€æ˜¯å¦å•Ÿç”¨ validation agentï¼‰ |
| `POST`  | `/agents/debug-run` | ä½¿ç”¨è‡ªè¨‚ prompt æ¸¬è©¦ agent æµç¨‹ï¼ˆdebug ç”¨ï¼‰                        |

---

### âš™ï¸ ç³»çµ±èˆ‡å¸³è™Ÿè¨­å®š

| æ–¹æ³•       | è·¯å¾‘               | æè¿°                    |
| -------- | ---------------- | --------------------- |
| `GET`    | `/user/profile`  | å–å¾—ä½¿ç”¨è€…åŸºæœ¬è³‡æ–™             |
| `DELETE` | `/user/account`  | åˆªé™¤å¸³è™Ÿèˆ‡æ‰€æœ‰ç›¸é—œè³‡æ–™ï¼ˆéœ€ç¢ºèªï¼‰      |
| `GET`    | `/system/status` | æŸ¥çœ‹ç³»çµ±ç‹€æ…‹ï¼ˆå‘é‡åº«é€£ç·šã€LLM å¯ç”¨æ€§ï¼‰ |
| `GET`    | `/logs`          | ï¼ˆåƒ…é™ç®¡ç†å“¡ï¼‰æŸ¥çœ‹ç³»çµ±æ—¥èªŒï¼å¯©è¨ˆç´€éŒ„    |

---

### ğŸ“¦ Embedding / å‘é‡æ“ä½œï¼ˆå¯é¸æ“´å……ï¼‰

| æ–¹æ³•       | è·¯å¾‘                 | æè¿°                           |
| -------- | ------------------ | ---------------------------- |
| `GET`    | `/vectors/summary` | æŸ¥çœ‹ç›®å‰ä½¿ç”¨è€…å·²å„²å­˜å‘é‡ç¸½æ•¸ã€å ç”¨å®¹é‡ç­‰çµ±è¨ˆ       |
| `POST`   | `/vectors/search`  | æ‰‹å‹•è¼¸å…¥ embedding å‘é‡åšæŸ¥è©¢ï¼ˆæ¸¬è©¦ï¼åˆ†æç”¨ï¼‰ |
| `DELETE` | `/vectors/cleanup` | æ¸…é™¤æ‰€æœ‰å·²åˆªé™¤ç­†è¨˜å°æ‡‰çš„å‘é‡ï¼ˆå¾Œå°å®šæ™‚ä»»å‹™å¯è‡ªå‹•åŸ·è¡Œï¼‰  |

---

## ğŸ—‚ å‰ç«¯é é¢èˆ‡ API å°æ‡‰ï¼ˆå°ç…§ï¼‰

| é é¢ Component    | å°æ‡‰ API                                               |
| --------------- | ---------------------------------------------------- |
| `LoginPage`     | `/auth/verify-token`                                 |
| `NotesPage`     | `/notes`ã€`/notes/{note_id}`ã€`/notes/{id}/reprocess`  |
| `ChatPage`      | `/query`ã€`/query/history`ã€`/query/{id}`              |
| `HistoryPage`   | `/query/history`ã€`/query/{id}`ã€`/query/{id}`ï¼ˆDELETEï¼‰ |
| `SettingsPage`  | `/user/profile`ã€`/user/account`ã€`/agents/config`     |
| `DashboardPage` | `/system/status`ã€`/vectors/summary`                  |

---